@model IEnumerable<string>
@{
    ViewBag.Title = "Photos";
    Layout = "~/Views/Shared/_LayoutMinimal.cshtml";
}
@section Styles
{
    <style>
        body {
            background-color: black;
        }

        .imgBg {
            background-color: green;
            position: absolute;
            top: 0;
            left: 0;
            width: 33%;
            height: 100%;
            /*min-width: 80px;
            min-height: 100px;*/
        }
    </style>
}
<div class="imgBg">
</div>
@*<div class="row">
    <div class="col-sm-12 center-block" style="width:100%">*@
<img id="thePic" class="ri" src="@Model.First()" />
@*</div>
    </div>*@
@*@foreach (var m in Model)
    {
            var str = (m as string).Replace("\\", "/");

            var a = @Url.Content(str.Substring(str.LastIndexOf("/media/")));
        <p>@a</p>
            <img src="@a">
    }*@
@section Scripts
{
    <script type="text/javascript">
        var files = [
            @foreach (var f in Model)
	        {
                @:'@f',
    	        }
        ];
        var idx = 0;
        var interval = null;
        var forward = null; // acts as 1st time flag by starting null

        function Advance(forward){
            idx += (forward ? 1 : -1);

            if (idx < 0)
                idx = files.length - 1;
            else if (idx > files.length - 1)
                idx = 0;
        }
        function ShowNext()
        {
            if (forward != null)
                Advance(forward);
            else
                forward = true;

            $("#thePic").attr("src", files[idx]);
        }
        function DoSlideshow(){
            if (interval == null)
                interval = setInterval(ShowNext,@ViewBag.IntervalAsMiliseconds);
            else
            {
                clearInterval(interval);
                interval = null;
            }
        }
        

        $(function () {
            DoSlideshow();

            $("#thePic").click(function(e){
                e.stopPropagation();
                DoSlideshow();
            });
            $(document).click(function(e){
                var third = screen.width / 3;
                var cx = e.clientX;
                var sw = screen.width;

                forward = (cx > sw / 2);
                ShowNext();

                //if(cx < third)
                //    Advance(false);
                //else if(cx > sw - third)
                //    Advance(true);
                var cy = e.clientY;
                var sx = e.screenX;
                var sy = e.screenY;
                var sh = screen.height;
            });
        })
    </script>
}